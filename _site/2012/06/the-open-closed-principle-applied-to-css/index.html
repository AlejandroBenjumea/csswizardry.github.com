<!DOCTYPE html>
<html lang=en>
<head>
    <meta charset=UTF-8>
    <meta name=viewport content="width=device-width, minimum-scale=1.0, maximum-scale=1.0">
    
    <title>The open/closed principle applied to CSS &ndash; CSS Wizardry</title>
    
    <link rel=stylesheet href=/css/csswizardry.min.css>
    <link href="http://fonts.googleapis.com/css?family=Ubuntu:300,500,300italic" rel=stylesheet>
    
    <link rel="shortcut icon" href=/icon.png>
    <link rel=apple-touch-icon-precomposed href=/icon.png>
    <meta name=apple-mobile-web-app-title content="inuit.css">
</head>
<body>

    <header class="page-head">
        <a href="/" class="logo">
            CSS Wizardry
        </a>
    </header>

    <section class="posts">
            <p>A question that often gets asked of OOCSS is ‘What happens when an object changes?’. That is to say, if you have a basic object that underpins a dozen different components, what happens when changing that object will favourably impact one component, but negatively impact the other 11? With so much abstracted and shared CSS, simple changes to a base object can have massive ramifications across whole projects; how do you deal with that?</p>

<p>Well, the short answer is <em>never change your base abstractions</em>.</p>

<p><strong>N.B.</strong> This article will require an understanding of the principles of OOCSS.</p>

<p>One way of dealing with objects in an OO language is the <a href="http://en.wikipedia.org/wiki/Open/closed_principle">open/closed principle</a> which states that  software entities (classes, modules, functions, etc.) should be open for extension, but closed for modification.</p>

<p>By sticking to this we know that our base objects themselves will never change; they are <em>closed for modification</em>. If we want to alter their effects in some way, we <em>extend them</em>.</p>

<h2>Why you should never modify a base object</h2>

<p>The key to writing good OOCSS is keeping your base objects <em>super</em> simple. As simple as you can get. The <a href="csswizardry.com/2011/09/the-nav-abstraction/">nav abstraction</a> literally just throws a list into horizontal mode; the <a href="csswizardry.com/2011/10/the-island-object/">island object</a> <em>only</em> boxes off content; the <a href="http://www.stubbornella.org/content/2010/06/25/the-media-object-saves-hundreds-of-lines-of-code/">media object</a> <em>only</em> places image-like and text-like content side-by-side. This ties in very nicely to the <a href="csswizardry.com/2012/04/the-single-responsibility-principle-applied-to-css/">single responsibility principle applied to CSS</a>.</p>

<p>By making your base objects this simple your choices become boolean; you use the object or you don’t. The object is either entirely suitable as a basis, or entirely _un_suitable.</p>

<p>As soon as you make the mistake of making your base objects too specific (for example, if your nav abstraction also adds padding to links) you might find that object is not entirely suited to another job for which it is <em>almost</em> perfect. You might find that in order to use the object you have to undo stuff in it.</p>

<p>A prime example of this is a mistake I made on <a href="http://faavorite.com/csswizardry">faavorite</a>. I made the island object carry cosmetics; instead of merely boxing off content I (foolishly) gave it a background, border and shadow style. This means that if I ever want to use the island for any different purposes I have to undo that; here I messed up and made an object too specific, so I have to now decide whether it’s worth unsetting these properties in order to reuse <code>.island</code>, or is it better to just make something new? I removed the boolean choice by not keeping my base simple enough.</p>

<p>So if you abstract sensibly you should find that you rarely need to <em>change</em> a base object, you should only ever need to extend it. Extending will add styles only in specific cases, making modifications to a base object is a <em>bad idea</em>.</p>

<p>After sensible and considered abstraction you should find that base objects never need changing, you just use them or stop using them.</p>

<p>For example, let’s imagine you have the media object used as a base across ten different components. One of the components is a user’s avatar with their username to the right of it, another is an album listing with the album art to the left and track list to the right. The others... we won’t concern ourselves with those. You might have markup like this:</p>

<pre><code>&lt;code&gt;&lt;a href=http://twitter.com/csswizardry class="media &lt;mark&gt;profile-link&lt;/mark&gt;"&gt;
    &lt;img src=avatar.jpg alt="" class=img&gt;
    &lt;span class=body&gt;@csswizardry&lt;/span&gt;
&lt;/a&gt;

&lt;div class="media &lt;mark&gt;album&lt;/mark&gt;"&gt;
    &lt;img src=/img/products/themirrorconspiracy.jpg alt="" class=img&gt;
    &lt;div class=body&gt;
        &lt;h2&gt;Thievery Corporation &amp;ndash; The Mirror Conspiracy&lt;/h2&gt;
        &lt;ol&gt;
            &lt;li&gt;Treasures&lt;/li&gt;
            &lt;li&gt;Le Monde&lt;/li&gt;
            &lt;li&gt;Indra&lt;/li&gt;
            &lt;li&gt;Lebanese Blonde&lt;/li&gt;
            &lt;li&gt;Focus on Sight&lt;/li&gt;
            &lt;li&gt;Air Batucada&lt;/li&gt;
            &lt;li&gt;Só com você&lt;/li&gt;
            &lt;li&gt;Samba Tranquille&lt;/li&gt;
            &lt;li&gt;Shadows of Ourselves&lt;/li&gt;
            &lt;li&gt;The Hong Kong Triad&lt;/li&gt;
            &lt;li&gt;Illumination&lt;/li&gt;
            &lt;li&gt;The Mirror Conspiracy&lt;/li&gt;
            &lt;li&gt;Tomorrow&lt;/li&gt;
            &lt;li&gt;Bario Alto&lt;/li&gt;
            &lt;li&gt;Guide for I and I&lt;/li&gt;
        &lt;/ol&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/code&gt;
</code></pre>

<p>There we have two totally different pieces of content sharing the same base object, which is great!</p>

<p>However, let’s say you decide you want to change the display of albums on your site, you now want to have the album art full-width with the track listing <em>below</em> it—no longer side-by-side as the media object is.</p>

<p>A lot of people here would argue that using an abstraction ties you to a permanent visual style; and they would be correct! That’s the point! You can no longer use the media object here, you have to change your markup. This isn’t a problem with the abstraction, it’s a problem with its implementation.</p>

<p>Instead of trying to use just CSS for force the media object to display differently in <em>this</em> case, we stop using the media object altogether. This abstraction is no longer suitable. We open up the include that houses the markup that handles albums and we get rid of some markup; not everything can or should be done through CSS alone. We hit our boolean; do we use the abstraction or not? In this case, not.</p>

<h2>When to extend</h2>

<p>So above we discussed when to stop using abstractions, but what about when we legitimately need to extend them?</p>

<p>Let’s take another example using <a href="http://www.stubbornella.org/content/2010/06/25/the-media-object-saves-hundreds-of-lines-of-code/">the media object</a> again. Here we have an amazingly simple abstraction that places image-like content alongside textual content:</p>

<pre><code>&lt;code&gt;&lt;span class="code-comment"&gt;/*
&lt;a href=http://twitter.com/csswizardry class=media&gt;
    &lt;img src=avatar.jpg alt="" class=img&gt;
    &lt;span class=body&gt;@csswizardry&lt;/span&gt;
&lt;/a&gt;
*/&lt;/span&gt;
.media{
    display:block;
}
    .img{
        float:left;
        &lt;mark&gt;margin-right:10px;&lt;/mark&gt;
    }
        .img img{
            display:block;
        }
    .body{
        overflow:hidden;
    }
        .body &gt; :last-child{
            margin-bottom:0;
        }&lt;/code&gt;
</code></pre>

<p>In this we see that there will be a <code>10px</code> margin between the image and the text-content to the right. By and large this is fine, but let’s go back to our album listing example again and imagine we are still using the media object. <code>10px</code> here just seems a little too cramped so what we do is <em>extend</em> the media object for cases where we use it for album listings, thus:</p>

<pre><code>&lt;code&gt;&lt;span class="code-comment"&gt;&lt;!-- HTML --&gt;&lt;/span&gt;
&lt;div class="media album"&gt;
    &lt;img src=/img/products/themirrorconspiracy.jpg alt="" class="img &lt;mark&gt;album-art&lt;/mark&gt;"&gt;
    &lt;div class=body&gt;
        ...
    &lt;/div&gt;
&lt;/div&gt;

&lt;span class="code-comment"&gt;/* CSS */&lt;/span&gt;
.media{
    display:block;
}
    .img{
        float:left;
        margin-right:10px;
    }
    &lt;span class="code-comment"&gt;/* Increase spacing if image is an album cover. */&lt;/span&gt;
    &lt;mark&gt;.album-art{&lt;/mark&gt;
        &lt;mark&gt;margin-right:20px;&lt;/mark&gt;
    &lt;mark&gt;}&lt;/mark&gt;
    ...&lt;/code&gt;
</code></pre>

<p>Here we can see how the base object remains intact but we extend it with a more specific use-case to modify its appearance. No other uses of the media object will be effected, only ones we explicitly flagged as being <code>.album-art</code>.</p>

<p>Here we make changes via extension, leaving our base—and every other instance of it—completely untouched.</p>

<h2>Final word</h2>

<p>If you’re using OOCSS you need to be aware that using an object is fairly boolean. You need to understand the open/closed principle and that once you’ve written an abstraction you’re committed to it (unless you fancy a large refactoring job). With this in mind avoid abstracting too early and abstract <em>very</em> carefully. Needing to modify an object is a big warning sign.</p>

<p>If you find you’re having to undo or—even worse—change base objects, you need to stop and consider where things went wrong. If an abstraction no longer becomes suitable that’s cool; we’re allowed to touch markup so just stop using it in your HTML. If you’re finding you only ever need to peg classes onto things to extend their appearance then you’re doing it right!</p>

<p>Do not modify your abstractions; needing to do so is a bad sign. If you need to alter things then <em>extend</em> them.</p>

<p>When working with OOCSS always keep in the back of your mind that <strong>objects are open to extension but closed to modification.</strong> This will force you to write your base objects as stripped back, abstract and reusable as possible. Modify their appearance only by extension (that is to say, by adding more classes).</p>


    </section>

    <footer class="page-foot">
        <p>&copy; 2012 <a href="http://twitter.com/csswizardry">Harry Roberts</a>.
        Built with <a href="http://inuitcss.com">inuit.css</a>
        and <a href="https://github.com/mojombo/jekyll/">Jekyll</a>.
    </footer>
    
</body>
</html>
