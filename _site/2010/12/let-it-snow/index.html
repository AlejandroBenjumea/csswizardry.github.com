<!DOCTYPE html>
<html lang=en>
<head>
    <meta charset=UTF-8>
    <meta name=viewport content="width=device-width, minimum-scale=1.0, maximum-scale=1.0">
    
    <title>Let it snow! &ndash; CSS Wizardry</title>
    
    <link rel=stylesheet href=/css/csswizardry.min.css>
    <link href="http://fonts.googleapis.com/css?family=Ubuntu:300,500,300italic" rel=stylesheet>
    
    <link rel="shortcut icon" href=/icon.png>
    <link rel=apple-touch-icon-precomposed href=/icon.png>
    <meta name=apple-mobile-web-app-title content="inuit.css">
</head>
<body>

    <header class="page-head">
        <a href="/" class="logo">
            CSS Wizardry
        </a>
    </header>

    <section class="posts">
            <p>Remember the snowy websites of the late 90s? The ones that cropped up around Christmas time and probably had a sleigh following the mouse cursor? Me too; horrible weren't they? However--given <a href="http://www.bbc.co.uk/news/uk-scotland-11901718">the recent weather the UK has had</a>--I have decided to give them a 2010 revival. That is to say no nasty Javascript, and some not-too-unsightly markup! <a href="/demos/snow/">Without further ado: Let it snow!</a></p>

<h2>Demo</h2>

<p>We also have <a href="/demos/snow/?time=day">a daytime version</a>!</p>

<p>First off, <a href="/demos/snow/">look at the demo</a> in IE8 or Firefox, <em>then</em> in Chrome or Safari (i.e. non-Webkit, then Webkit).</p>

<p>In Firefox you should see a series of snowflakes randomly sized and placed across the screen. In Webkit, you should see these snowflakes falling, all at different speeds. We also have a <code>repeat-x</code> background image of some snow running across the bottom of the browser window.</p>

<h2>The code</h2>

<p>We use a lot of PHP to create the random effects applied to the snowflakes, and also automate a lot of the legwork needed to create 65 unique classes, it's commented as shown and should make total sense.</p>

<pre><code>&lt;code&gt;&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /&gt;
  &lt;title&gt;Let it snow&lt;/title&gt;
  &lt;link rel="stylesheet" type="text/css" href="css/style.css" /&gt;
  &lt;style type="text/css"&gt;

    &lt;?php &lt;span class="code-comment"&gt;//If the day parameter is set, use a different background&lt;/span&gt; ?&gt;
    &lt;?php if(isset($_GET['time']) &amp;&amp; $_GET['time'] == 'day') { ?&gt;
    html{
      background:url(img/css/snow.png) bottom left repeat-x fixed #b4c8cc;
    }
    &lt;?php } ?&gt;


    &lt;?php &lt;span class="code-comment"&gt;//Number of snowflakes -- you decide!&lt;/span&gt; ?&gt;
    &lt;?php $snowflakeCount = 65;  ?&gt;

    &lt;?php &lt;span class="code-comment"&gt;//Create a unique class for each of the snowflakes and assign each one a random size and animation duration&lt;/span&gt; ?&gt;
    &lt;?php  for($i = 1; $i &lt;= $snowflakeCount; $i++) { ?&gt;
      .snowflake-&lt;?php echo $i ?&gt;{
        &lt;?php &lt;span class="code-comment"&gt;//Create a random decimal number between 1 and 10:&lt;/span&gt; ?&gt;
        -webkit-animation-duration:&lt;?php echo (rand(10,100) / 10); ?&gt;s;
        &lt;?php &lt;span class="code-comment"&gt;//Create a random decimal number between 0.1 and 2:&lt;/span&gt; ?&gt;
        font-size:&lt;?php echo (rand(1,20) / 10); ?&gt;em;
      }
    &lt;?php } ?&gt;
  &lt;/style&gt;
&lt;/head&gt;

&lt;body&gt;

  &lt;div id="wrapper"&gt;
    &lt;h1&gt;Let it snow!&lt;/h1&gt;
    &lt;p&gt;&lt;a href="/2010/12/let-it-snow/"&gt;Return to article.&lt;/a&gt;&lt;/p&gt;
  &lt;/div&gt;

  &lt;div id="snow"&gt;
    &lt;?php &lt;span class="code-comment"&gt;//Loop through your chosen amount of snowflakes and make that many empty spans (with associated class) and randomly place them on-screen&lt;/span&gt; ?&gt;
    &lt;?php for($i = 1; $i &lt;= $snowflakeCount; $i++) { ?&gt;
      &lt;span class="snowflake snowflake-&lt;?php echo $i; ?&gt;" style="top:&lt;?php echo rand(1,98); ?&gt;%; left:&lt;?php echo rand(1,98); ?&gt;%"&gt;&lt;/span&gt;
    &lt;?php  } ?&gt;
  &lt;/div&gt;

&lt;/body&gt;
&lt;/html&gt;&lt;/code&gt;
</code></pre>

<p>Basically we use PHP to create 65 empty <code>&lt;span&gt;</code>s which are then randomly placed and sized on the page. We also give each one a random <code>-webkit-animation-duration</code> so as to ensure they fall at different speeds. Two points worth noting:</p>

<pre><code>&lt;code&gt;&lt;?php &lt;span class="code-comment"&gt;//Create a random decimal number between 1 and 10:&lt;/span&gt; ?&gt;
-webkit-animation-duration:&lt;?php echo (rand(10,100) / 10); ?&gt;s;
&lt;?php &lt;span class="code-comment"&gt;//Create a random decimal number between 0.1 and 2:&lt;/span&gt; ?&gt;
font-size:&lt;?php echo (rand(1,20) / 10); ?&gt;em;&lt;/code&gt;
</code></pre>

<p>Thanks to <a href="http://twitter.com/punch_n_pie">Dan Bentley</a> for his PHP input here-and-there--mine is a tad rusty.</p>

<p>Here we use <code>rand(10,100)</code> to create a random <em>whole</em> number between ten and one hundred (let's say 75). We then divide this by ten to get a decimal (i.e. 7.5) to use as the duration in seconds.
We then use <code>rand(1,20)</code> to create a random number between one and twenty (say, 5) which we then divide by ten to get a decimal (i.e. 0.5) for the <code>font-size</code> in ems.</p>

<h3>The CSS</h3>

<pre><code>&lt;code&gt;&lt;span class="code-comment"&gt;/*------------------------------------*\
  MAIN
\*------------------------------------*/&lt;/span&gt;
html{
  font-family:Calibri, Arial, Verdana, sans-serif;
  background:url(../img/css/snow.png) bottom left repeat-x fixed #222;
  color:#fff;
  text-shadow:1px 1px 1px rgba(0,0,0,0.5);
  height:101%;
}
body{
  width:940px;
  padding:10px;
  margin:0 auto;
}
#wrapper{
  position:relative;
  z-index:5; &lt;span class="code-comment"&gt;/* Bring the content over the snowflakes */&lt;/span&gt;
}
h1{
  font-weight:bold;
  font-size:1.5em;
  margin-bottom:20px;
}
a{
  color:#fff;
}





&lt;span class="code-comment"&gt;/*------------------------------------*\
  SNOWFLAKES
\*------------------------------------*/&lt;/span&gt;
&lt;span class="code-comment"&gt;/* Set up a blank canvas in which to house the snowflakes */&lt;/span&gt;
#snow{
  position:fixed;
  top:0;
  right:0;
  bottom:0;
  left:0;
  overflow:hidden;
}
.snowflake{
  text-shadow:none;
  position:absolute;
  top:0;
  &lt;span class="code-comment"&gt;/* Set up the animation */&lt;/span&gt;
  -webkit-animation-name:snowflake-animation;
  -webkit-animation-iteration-count:infinite;
  -webkit-animation-timing-function:linear;
}
&lt;span class="code-comment"&gt;/* Fill the empty span with a snowflake-like asterisk */&lt;/span&gt;
.snowflake:before{
  content:"*";
}
@-webkit-keyframes snowflake-animation{
  &lt;span class="code-comment"&gt;/* Start at the top */&lt;/span&gt;
  from{
    top:0%;
    -webkit-transform:rotate(0deg);
  }
  &lt;span class="code-comment"&gt;/* Rotate by 360 degrees up until the half way point */&lt;/span&gt;
  50%{
    -webkit-transform:rotate(360deg);
  }
  &lt;span class="code-comment"&gt;/* Animate to the bottom whilst rotating back to zero */&lt;/span&gt;
  to{
    top:100%;
    -webkit-transform:rotate(0deg);
  }
}&lt;/code&gt;
</code></pre>

<p>The CSS, again, is extremely straightforward and self-explanatory. <a href="/2010/09/keeping-code-clean-with-content/">Use <code>content:"";</code> to keep our code a little cleaner</a>, and animate all the snowflakes top-to-bottom whilst rotating them. Simple!</p>

<p>So there we've put a new-age spin on a very dated (and still pretty garish) technique.</p>

<h2>Addendum</h2>

<p>Following <a href="http://twitter.com/csswizardry/statuses/10425282116722688">this Twitter conversation</a> between <a href="http://twitter.com/dbanksDesign">Danny Banks</a> and myself the <code>#snow</code> <code>&lt;div&gt;</code> was introduced. Cheers for the heads-up, <a href="http://twitter.com/dbanksDesign">Danny</a>!</p>


    </section>

    <footer class="page-foot">
        <p>&copy; 2012 <a href="http://twitter.com/csswizardry">Harry Roberts</a>.
        Built with <a href="http://inuitcss.com">inuit.css</a>
        and <a href="https://github.com/mojombo/jekyll/">Jekyll</a>.
    </footer>
    
</body>
</html>
