<!DOCTYPE html>
<html lang=en>
<head>
    <meta charset=UTF-8>
    <meta name=viewport content="width=device-width, minimum-scale=1.0, maximum-scale=1.0">
    
    <title>CSS bar chartsâ€”styling data with CSS3 and progressive enhancement &ndash; CSS Wizardry</title>
    
    <link rel=stylesheet href=/css/csswizardry.min.css>
    <link href="http://fonts.googleapis.com/css?family=Ubuntu:300,500,300italic" rel=stylesheet>
    
    <link rel="shortcut icon" href=/icon.png>
    <link rel=apple-touch-icon-precomposed href=/icon.png>
    <meta name=apple-mobile-web-app-title content="inuit.css">
</head>
<body>

    <header class="page-head">
        <a href="/" class="logo">
            CSS Wizardry
        </a>
    </header>

    <section class="posts">
            <p>Bar charts in CSS are neither very new, or very difficult. Using some pretty basic styling you can force lists etc into resembling graphs and charts fairly easily. Such charts, in their most basic form, work perfectly well in displaying and presenting the data they represent. However, using some rich CSS3 and progressive enhancement, you can really start pushing the display and presentation of these normally boring documents to the next level. They are also an ideal way in which to demonstrate the power and ability of progressive enhancement.</p>

<h2><a href="/demos/graphs/">View demo</a></h2>

<p><strong>Look at the site in IE8, <em>then</em> Firefox, <em>then</em> Safari/Chrome.</strong> Keep refreshing.</p>

<p>I have created <a href="/demos/graphs/">a demo page</a> which simply represents three items of data expressed as percentages. It is not the data itself or the numbers we are concerned with here--it is the proof of concept. The fact that this can be done on my made up data shows that you can do it too, on real life information.</p>

<h2>Progressive enhancement</h2>

<p>At <a href="http://venturelab.co.uk/">Venturelab</a>, we decided to use progressive enhancement as a matter of course. CSS3 and designing in the browser all the way!</p>

<p>Progressive enhancement is, in my opinion, one of the most exciting schools of thought web development has seen in years (though I <em>have</em> only been in the web for three...). It is the idea whereby any non-essential features (i.e. anything whose absence will have no adverse effect on the usability or accessibility of a website) are added to the website in a <em>progressive</em> manner--often through CSS3.</p>

<p>The benchmark example is rounded corners; to apply these through old means, for example with images, would have taken a developer a substantial amount of time--time the client is paying for. It seems silly now to think that way-back-when, putting rounded corners on a <code>div</code> might have taken upward of 30 minutes, when we can apply it in about 5 seconds using <code>-moz-border-radius:5px;</code>.</p>

<p>It really is a no brainer--anyone visiting the site in a browser with no CSS3 support will see square corners. Does this matter? Of course it doesn't. No one visits a site to look solely at the design--they visit for content. Does it matter to them what shape the corners of your RSS button are? No again. Progressive enhancement saves you time, and your client money.</p>

<h3>Isn't this just graceful degradation?</h3>

<p>Graceful degradation = building for the best and getting worse; progressive enhancement = building to cater the worst and getting better...</p>

<p>The line between progressive enhancement and graceful degradation is fine but significant. Graceful degradation is the idea that you'd build a site for, say, Firefox, then selectively break and <em>downgrade</em> it in the likes of IE(6). Progressive enhancement takes a much more positive attitude in that you build <em>for</em> IE(6) and then selectively <em>upgrade</em> it in browsers like Firefox and Safari. It's no longer starting great and getting worse, it's now starting great and getting better.</p>

<h3>Internet Explorer</h3>

<p><strong>N.B.</strong> Only tested in IE8 as this is not a final solution, rather a proof-of-concept.</p>

<p>Internet Explorer(8)'s take on my bar charts is as you'd expect from any browser, it renders it perfectly well, providing clear, accessible content, with a flawless UX and perfectly usable. <em>This is not bad!</em> We don't need to downgrade anything, this is our starting point. It looks good and it functions perfectly. If you did as above and visited in IE8 first, you wouldn't know that there were round corners missing--because that <em>doesn't</em> matter.</p>

<p><img src="http://csswizardry.com/wp-content/uploads/2010/02/ie.gif" alt="A screenshot of the CSS bar chart in Internet Explorer 8" /></p>

<h3>Firefox</h3>

<p>Next up is Firefox, where we add some round corners to the blue bars, and also a very subtle drop shadow (<code>text-shadow:;</code>) on the text. This is no more usable than before, the content is no more accessible than in IE, but it <em>does</em> look a tad nicer.</p>

<p><img src="http://csswizardry.com/wp-content/uploads/2010/02/firefox.gif" alt="A screenshot of the CSS bar chart in Firefox" /></p>

<h3>Safari/Chrome</h3>

<p>It is in Webkit based browsers such as Safari and Chrome that the real magic happens. Webkit's proprietary CSS is above and beyond that of any other rendering engine...</p>

<p><img src="http://csswizardry.com/wp-content/uploads/2010/02/safari.gif" alt="A screenshot of the CSS bar chart in Safari" /></p>

<p>What if I couldn't be bothered opening Photoshop to make a subtle gradient <code>.gif</code> for the bars? No worries, use Webkit's gradient CSS. A little reflection might look nice on the bars too, but I don't fancy any superfluous markup or <code>.png</code>s to fiddle with. Ah great, Webkit has a bit of reflection CSS too.</p>

<p>However, for the real show-piece, the Webkit animation. I'm not using any Javascript libraries anywhere else in the page so I don't fancy pulling a whole one in for something that won't really be missed if it's not there. I hear Webkit has animations... magic!</p>

<h2>The code</h2>

<p>Now that's the theory covered, let's look at what does all this stuff... Please note, I have used some PHP to randomise the values used by the bars of the chart. As a result, some CSS appears in the source code of the PHP file, and the rest in <a href="http://csswizardry.com/demos/graphs/css/style.css">the page's CSS file</a>. The code shown in the examples below is condensed into one large chunk.</p>

<h3>The markup</h3>

<p>The markup simply comprises of one uncluttered <code>dl</code>. The reasoning behind a definition list is that each item is a title, followed by some information about that title. Not only is this semantically correct, it's a nice set of elements to be working with to achieve the layout we've got.</p>

<pre><code>&lt;code&gt;&lt;dl id="chart"&gt;
  &lt;dt&gt;Sales increase this week&lt;/dt&gt;
  &lt;dd&gt;&lt;span id="data-one"&gt;47%&lt;/span&gt;&lt;/dd&gt;
  &lt;dt&gt;Revenue increase this week&lt;/dt&gt;
  &lt;dd&gt;&lt;span id="data-two"&gt;59%&lt;/span&gt;&lt;/dd&gt;
  &lt;dt&gt;Profit increase this week&lt;/dt&gt;
  &lt;dd&gt;&lt;span id="data-three"&gt;26%&lt;/span&gt;&lt;/dd&gt;
&lt;/dl&gt;&lt;/code&gt;
</code></pre>

<p>That's all there is to it.</p>

<h3>The CSS, CSS3 and progressive enhancement</h3>

<pre><code>&lt;code&gt;&lt;span class="code-comment"&gt;/*------------------------------------*\
  CHART
\*------------------------------------*/&lt;/span&gt;
#chart{
  width:520px;
}
#chart dt{
  width:160px;
  float:left;
  margin:0 20px 5px 0;
  padding:2px 0;
  display:inline;
  font-weight:bold;
  text-align:right;
}
#chart dd{
  width:339px;
  border-right:1px solid #ddd;
  float:left;
  margin-bottom:5px;
  display:inline;
}
#chart dd span{
  color:#fff;
  background:#09f;
  text-align:center;
  padding:2px 0;
  display:block;

  text-shadow:1px 1px 1px rgba(0,0,0,0.2);
  -moz-border-radius:2px;
  -webkit-border-radius:2px;
  border-radius:2px;
  background:-webkit-gradient(linear, left top, -&gt;
  left bottom, from(#09f), to(#077fd0));
  -webkit-box-reflect:below 0 -&gt;
  -webkit-gradient(linear, left top, -&gt;
  left bottom, from(rgba(0,0,0,0)), to(rgba(0,0,0,0.25)));
}
#data-one{
  width:47%;
}
#data-two{
  width:59%;
}
#data-three{
  width:26%;
}
#data-one{
  -webkit-animation-name:bar-one; &lt;span class="code-comment"&gt;/* Give the bar an animation with a
    unique name */&lt;/span&gt;
}
#data-two{
  -webkit-animation-name:bar-two; &lt;span class="code-comment"&gt;/* Give the bar an animation with a
    unique name */&lt;/span&gt;
}
#data-three{
  -webkit-animation-name:bar-three; &lt;span class="code-comment"&gt;/* Give the bar an animation with a
    unique name */&lt;/span&gt;
}
#data-one,#data-two,#data-three{ &lt;span class="code-comment"&gt;/* Define animation styles for all three
    bars at once */&lt;/span&gt;
  -webkit-animation-duration:0.5s; &lt;span class="code-comment"&gt;/* Animation duration in seconds */&lt;/span&gt;
  -webkit-animation-iteration-count:1; &lt;span class="code-comment"&gt;/* Amount of times to loop */&lt;/span&gt;
  -webkit-animation-timing-function:ease-out; &lt;span class="code-comment"&gt;/* Ease in, out etc. */&lt;/span&gt;
}
@-webkit-keyframes bar-one{
  0%{ &lt;span class="code-comment"&gt;/* Define bar-one styles at 0% (0 seconds) */&lt;/span&gt;
    width:0%;
  }
  100%{ &lt;span class="code-comment"&gt;/* Define bar-one styles at 100% (0.5 seconds) */&lt;/span&gt;
    width:47%;
  }
}
@-webkit-keyframes bar-two{
  0%{ &lt;span class="code-comment"&gt;/* Define bar-two styles at 0% (0 seconds) */&lt;/span&gt;
    width:0%;
  }
  100%{ &lt;span class="code-comment"&gt;/* Define bar-two styles at 100% (0.5 seconds) */&lt;/span&gt;
    width:59%;
  }
}
@-webkit-keyframes bar-three{
  0%{ &lt;span class="code-comment"&gt;/* Define bar-three styles at 0% (0 seconds) */&lt;/span&gt;
    width:0%;
  }
  100%{ &lt;span class="code-comment"&gt;/* Define bar-three styles at 100% (0.5 seconds) */&lt;/span&gt;
    width:26%;
  }
}&lt;/code&gt;
</code></pre>

<h4>In detail</h4>

<p>There may well be some bits in there that you're not familiar with, particularly CSS animations. Basically, to animate an element you need to do a few things:</p>

<ol>
<li>Assign the element an animation name. This name is the 'hook' to link an animation, defined later, to an element.</li>
</ol>


<pre><code>&lt;code&gt;#data-one{
  -webkit-animation-name:bar-one;
}&lt;/code&gt;
</code></pre>

<ol>
<li>Assign the element animation properties. Here you set things like duration, repetition and ease-in/out.</li>
</ol>


<pre><code>&lt;code&gt;#data-one,#data-two,#data-three{
  -webkit-animation-duration:0.5s;
  -webkit-animation-iteration-count:1;
  -webkit-animation-timing-function:ease-out;
}&lt;/code&gt;
</code></pre>

<ol>
<li>Set up the keyframes of the animation. Here you set the various points. Here we have one thing to animate through two states, so we simply set a beginning at 0% and and end at 100%. We could set at any percentage in between but as we just have a beginning and an end, we don't need to--Webkit sees to that.</li>
</ol>


<pre><code>&lt;code&gt;@-webkit-keyframes bar-one{
  0%{
    width:0%;
  }
  100%{
    width:47%;
  }
}&lt;/code&gt;
</code></pre>

<p>With regards the Webkit reflections, it may be a better idea to consult the <a href="http://webkit.org/blog/182/css-reflections/">Surfin' Safari page on that</a>, as anything I'd say would most likely be a poorly pulled off rehash.</p>

<h2>Closing word</h2>

<p>So there you have it, a real life, justifiable and wholly appropriate application of CSS3 and progressive enhancement coupled with data visualisation. Don't be held back by the limitations of older browsers--relish in the opportunities new ones bring.</p>

<p>And as a final bonus, <a href="http://twitter.com/VIPickering">@VIPickering</a> requested <a href="/demos/graphs/index2.php">this (view in Safari/Chrome)</a>... enjoy.</p>


    </section>

    <footer class="page-foot">
        <p>&copy; 2012 <a href="http://twitter.com/csswizardry">Harry Roberts</a>.
        Built with <a href="http://inuitcss.com">inuit.css</a>
        and <a href="https://github.com/mojombo/jekyll/">Jekyll</a>.
    </footer>
    
</body>
</html>
